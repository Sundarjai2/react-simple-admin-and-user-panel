{"ast":null,"code":"var _jsxFileName = \"/home/sermasundarj/Desktop/rss/packages/react-client/src/components/commoncomponent/SigninForm.js\";\nimport React, { useState, Component } from 'react';\nimport { BrowserRouter as Router, NavLink } from \"react-router-dom\";\nimport { Link, withRouter, useHistory } from \"react-router-dom\";\nimport { Redirect } from 'react-router';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button'; // import CssBaseline from '@material-ui/core/CssBaseline';\n\nimport TextField from '@material-ui/core/TextField';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport { withStyles } from '@material-ui/core/styles';\nimport { useStyles } from '../../style/style';\nimport '../../App.css';\nimport { Mutation } from 'react-apollo';\nimport { LOGIN_MUTATION } from '../../gql-query/queries';\n\nfunction HigherOrderComponent(props) {\n  const _useStyles = useStyles(),\n        classes = _useStyles.classes;\n}\n\nclass SignIn extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: '',\n      password: '',\n      error: '',\n      redirect: false\n    };\n    this.handlePassChange = this.handlePassChange.bind(this);\n    this.handleUserChange = this.handleUserChange.bind(this);\n    this.dismissError = this.dismissError.bind(this);\n  }\n\n  dismissError() {\n    this.setState({\n      error: ''\n    });\n  }\n\n  handleUserChange(evt) {\n    this.setState({\n      email: evt.target.value\n    });\n  }\n\n  handlePassChange(evt) {\n    this.setState({\n      password: evt.target.value\n    });\n  }\n\n  render() {\n    const classes = this.props.classes;\n    const redirect = this.state.redirect;\n    return React.createElement(Container, {\n      component: \"main\",\n      maxWidth: \"xs\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: classes.paper,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      align: \"center\",\n      component: \"h1\",\n      variant: \"h5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, \"Sign in\"), React.createElement(Mutation, {\n      mutation: LOGIN_MUTATION,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, (userLogin, {\n      loading,\n      error,\n      data\n    }) => {\n      if (loading) return 'Loading...';\n      if (error) return \"Error! \".concat(error.message);\n\n      if (redirect) {\n        return React.createElement(Redirect, {\n          to: \"/home\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        });\n      } else {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        }, React.createElement(\"form\", {\n          className: classes.form,\n          noValidate: true,\n          onSubmit: e => {\n            e.preventDefault();\n\n            if (!this.state.email) {\n              return this.setState({\n                error: 'Username is required'\n              });\n            }\n\n            if (!this.state.password) {\n              return this.setState({\n                error: 'Password is required'\n              });\n            }\n\n            this.setState({\n              error: ''\n            });\n            userLogin({\n              variables: {\n                email: this.state.email,\n                password: this.state.password\n              }\n            }).then(res => {\n              let history = useHistory();\n\n              if (res.data.userLogin.email === null) {\n                localStorage.removeItem('userLoginData');\n              } else {\n                localStorage.setItem('userLoginData', JSON.stringify(res.data.userLogin));\n                this.setState({\n                  redirect: true\n                });\n              }\n            }).catch(res => {\n              console.log(res);\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }, this.state.error && React.createElement(\"h3\", {\n          \"data-test\": \"error\",\n          onClick: this.dismissError,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          onClick: this.dismissError,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        }, \"\\u2716\"), this.state.error), React.createElement(TextField, {\n          variant: \"outlined\",\n          margin: \"normal\",\n          required: true,\n          fullWidth: true,\n          id: \"username\",\n          label: \"Username\",\n          name: \"username\",\n          autoComplete: \"username\",\n          value: this.state.email,\n          onChange: this.handleUserChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        }), React.createElement(TextField, {\n          variant: \"outlined\",\n          margin: \"normal\",\n          required: true,\n          fullWidth: true,\n          name: \"password\",\n          label: \"Password\",\n          type: \"password\",\n          id: \"password\",\n          autoComplete: \"current-password\",\n          value: this.state.password,\n          onChange: this.handlePassChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128\n          },\n          __self: this\n        }), React.createElement(Button, {\n          type: \"submit\",\n          fullWidth: true,\n          variant: \"contained\",\n          color: \"primary\",\n          className: classes.submit,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141\n          },\n          __self: this\n        }, \"Sign In\")), React.createElement(Link, {\n          to: \"/signup\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152\n          },\n          __self: this\n        }, \"Or Signup Here\"));\n      }\n    }))) // <form>\n    //   <input type=\"text\" name=\"email\" placeholder=\"Email\" value={this.state.email} onChange={this.handleEmailChange} />\n    //   <input type=\"password\" name=\"password\" placeholder=\"Password\" value={this.state.password} onChange={this.handlePasswordChange}/>\n    //   <button type=\"button\" onClick={this.handleLogin}>Login</button>\n    // </form>\n    ;\n  }\n\n}\n\nexport default withStyles(useStyles)(SignIn);","map":{"version":3,"sources":["/home/sermasundarj/Desktop/rss/packages/react-client/src/components/commoncomponent/SigninForm.js"],"names":["React","useState","Component","BrowserRouter","Router","NavLink","Link","withRouter","useHistory","Redirect","Avatar","Button","TextField","LockOutlinedIcon","Typography","Container","withStyles","useStyles","Mutation","LOGIN_MUTATION","HigherOrderComponent","props","classes","SignIn","constructor","state","email","password","error","redirect","handlePassChange","bind","handleUserChange","dismissError","setState","evt","target","value","render","paper","userLogin","loading","data","message","form","e","preventDefault","variables","then","res","history","localStorage","removeItem","setItem","JSON","stringify","catch","console","log","submit"],"mappings":"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","sourcesContent":["import React, { useState, Component } from 'react';\nimport { BrowserRouter as Router, NavLink } from \"react-router-dom\";\nimport { Link, withRouter, useHistory } from \"react-router-dom\";\nimport { Redirect } from 'react-router';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\n// import CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport { withStyles } from '@material-ui/core/styles';\nimport { useStyles } from '../../style/style';\nimport '../../App.css';\n\nimport { Mutation } from 'react-apollo';\nimport { LOGIN_MUTATION } from '../../gql-query/queries';\n\nfunction HigherOrderComponent(props) {\n  const { classes } = useStyles();\n\n}\n\nclass SignIn extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: '',\n      password: '',\n      error: '',\n      redirect: false\n    };\n\n\n    this.handlePassChange = this.handlePassChange.bind(this);\n    this.handleUserChange = this.handleUserChange.bind(this);\n    this.dismissError = this.dismissError.bind(this);\n\n  }\n\n  dismissError() {\n    this.setState({ error: '' });\n  }\n\n  handleUserChange(evt) {\n    this.setState({\n      email: evt.target.value,\n    });\n  };\n\n  handlePassChange(evt) {\n    this.setState({\n      password: evt.target.value,\n    });\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { redirect } = this.state;\n    return (\n\n      <Container component=\"main\" maxWidth=\"xs\">\n        {/* <CssBaseline /> */}\n        <div className={classes.paper}>\n          {/* <div className={classes.avatarSignin}>\n        <Avatar className={classes.avatar}>\n          <LockOutlinedIcon />\n        </Avatar>\n        </div> */}\n          <Typography align=\"center\" component=\"h1\" variant=\"h5\">\n            Sign in\n        </Typography>\n          <Mutation mutation={LOGIN_MUTATION}>\n            {(userLogin, { loading, error, data }) => {\n              if (loading) return 'Loading...';\n              if (error) return `Error! ${error.message}`;\n              if (redirect) {\n                return <Redirect to='/home'/>;\n              }else{\n\n                return (\n                  <div>\n                    <form className={classes.form} noValidate\n                      onSubmit={e => {\n                        e.preventDefault();\n  \n                        if (!this.state.email) {\n                          return this.setState({ error: 'Username is required' });\n                        }\n  \n                        if (!this.state.password) {\n                          return this.setState({ error: 'Password is required' });\n                        }\n  \n                        this.setState({ error: '' });\n  \n                        userLogin({ variables: { email: this.state.email, password: this.state.password } }).then(res => {\n                          let history = useHistory();\n                          if (res.data.userLogin.email === null) {\n                            localStorage.removeItem('userLoginData');\n                          } else {\n                            localStorage.setItem('userLoginData', JSON.stringify(res.data.userLogin));\n                            this.setState({ redirect: true })\n                          }\n                        }).catch(res => {\n                          console.log(res)\n                        });\n                      }}>\n                      {\n                        this.state.error &&\n                        <h3 data-test=\"error\" onClick={this.dismissError}>\n                          <button onClick={this.dismissError}>✖</button>\n                          {this.state.error}\n                        </h3>\n                      }\n                      <TextField\n                        variant=\"outlined\"\n                        margin=\"normal\"\n                        required\n                        fullWidth\n                        id=\"username\"\n                        label=\"Username\"\n                        name=\"username\"\n                        autoComplete=\"username\"\n                        value={this.state.email} onChange={this.handleUserChange}\n                      />\n                      <TextField\n                        variant=\"outlined\"\n                        margin=\"normal\"\n                        required\n                        fullWidth\n                        name=\"password\"\n                        label=\"Password\"\n                        type=\"password\"\n                        id=\"password\"\n                        autoComplete=\"current-password\"\n                        value={this.state.password} onChange={this.handlePassChange}\n                      />\n  \n                      <Button\n                        type=\"submit\"\n                        fullWidth\n                        variant=\"contained\"\n                        color=\"primary\"\n                        className={classes.submit}\n                      >\n                        Sign In\n          </Button>\n  \n                    </form>\n                    <Link to=\"/signup\">Or Signup Here</Link>\n                  </div>\n                )\n              }\n            }}\n          </Mutation>\n\n        </div>\n      </Container>\n      // <form>\n      //   <input type=\"text\" name=\"email\" placeholder=\"Email\" value={this.state.email} onChange={this.handleEmailChange} />\n      //   <input type=\"password\" name=\"password\" placeholder=\"Password\" value={this.state.password} onChange={this.handlePasswordChange}/>\n      //   <button type=\"button\" onClick={this.handleLogin}>Login</button>\n      // </form>\n\n    );\n\n  }\n}\n\nexport default withStyles(useStyles)(SignIn);"]},"metadata":{},"sourceType":"module"}